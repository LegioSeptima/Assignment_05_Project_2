---
title: "Assignment_05"
author: "Matthew D. Ciaramitaro, Praveen Kumar Kenderla, and Steven Tran"
date: "March 21, 2018"
output: pdf_document
---

```{R}
#Libraries
library(tidyverse)
library(stringr)
library(dplyr)
library(ggplot2)

# Obtaining Data
url1 <- "http://www.ndbc.noaa.gov/view_text_file.php?filename=mlrf1h"
url2 <- ".txt.gz&dir=data/historical/stdmet/"
years <- c(1987:2016)
urls <- str_c(url1, years, url2, sep = "")
filenames <- str_c("mr", years, sep = "")
N <- length(urls)

## Formatting Data
for (i in 1:N){
  suppressMessages(
    assign(filenames[i], read_table(urls[i], col_names = TRUE))
  )
  file <- get(filenames[i])
  colnames(file)[1] <-"YYYY"
  if(!is.numeric(file[1,1])){
    file <- file[2:nrow(file),]
    file$YYYY <- as.numeric(file$YYYY)
  }
  file$YYYY <- ifelse(as.numeric(file$YYYY%/%100)<1, file$YYYY+1900, file$YYYY)
  file <- file %>% filter(hh==12)
    
# Combining Data 
  if(i == 1){
    MR <- file %>% select(YYYY, MM, DD, hh, ATMP, WTMP)
  }
  else{
    MR <- rbind.data.frame(MR, file %>% select(YYYY, MM, DD, hh, ATMP, WTMP))
    }
}

# Making Data Numeric
MR$MM <- as.numeric(MR$MM)
MR$DD <- as.numeric(MR$DD)
MR$hh <- as.numeric(MR$hh)
MR$ATMP <- as.numeric(MR$ATMP)
MR$WTMP <- as.numeric(MR$WTMP)
MR <- MR %>% filter(ATMP<99)

# Making Time Series for Air Temperature
chk <- MR %>% select(YYYY,ATMP)
ggplot(chk)+
  geom_line(aes(x=YYYY, y=ATMP))
```
